<section data-type="chapter" id="ch3">
  <header>
    <div class="icon">
      <img src="../images/sections/02/coffee.png" />
    </div>
    <p>Chapter 3</p>
    <h1>On Data Aggregation</h1>
  </header>

  <section data-type="sect1">
    <p>When trying to turn data into information, the data you start with matters a lot. Data can be simple factoids—in which someone else has done all of the analysis—or raw transactions, where the exploration is left entirely to the user.</p>

    <figure>[Image goes here]</figure>

    <p>Most data sets fall somewhere in the middle. If we know what kind of data we have to begin with, we can greatly simplify the task of correctly visualizing it the first time. Getting a communicator to describe the information in the first place, either through a wizard or simply by having them use one of several templates filled with sample data, makes this far easier.</p>
    <p>Let’s look at these types of aggregation one by one, using the example of Tequila consumption. Let’s assume a bar tracks each shot of Tequila sold, and records two pieces of information about the sale: the gender of the buyer, and the kind of tequila (blanco, reposado, or anejo).</p>

    <p>The basic table of this data, by year, looks like this<a class="footnote" href="#fn1">1</a>:</p>

    <figure>[Image goes here]</figure>

    <p id="fn1" class="footnote">1. This is completely made up Tequila data, BTW.</p>

    <h2>Factoid</h2>

    <p>A factoid is a piece of trivia. It is calculated from source data, but chosen to emphasize a particular point.</p>

    <p><strong>Example:</strong> 36.7% of Tequila shots in 2000 were consumed by women.</p>

    <h2>Series</h2>

    <p>This is one type of information (the “dependent” variable) compared to another (the “independent” variable.) Often, the independent variable is time.</p>

    <figure>[Image goes here]</figure>

    <p>In this example, the total sales of tequila shots <em>depends</em> on the year. That is, the year is independent (“pick a year, any year”) and the sales is dependent (“based on that year, the consumption is 23,005 shots.”)</p>

    <p>It can also be some other set of continuous data, such as temperature. Consider this table of hypothermia survival times, in which water temperature is the independent variable:</p>

    <figure>[Image goes here]</figure>

    <p>Here’s a related example showing age bracket as the independent variable.</p>

    <figure>[Image goes here]</figure>

    <p>And it can be a series of non-contiguous, but related, information in a category—such as major car brands, types of dog, vegetables, or the planets in the solar system:</p>

    <figure>[Image goes here]</figure>

    <p>In many cases, series data has one and only one dependent variable for each independent variable. In other words, there is only one number for “tequila consumption” for each year on record. This is usually displayed as a bar, series, or column graph.</p>

    <figure>[Image goes here]</figure>

    <p>In cases where there are several dependent variables for each independent one, we often show the information as a scatterplot or heat map, or do some kind of processing (such as an average) to simplify what’s shown. We’ll come back to this in the Summary Records section below.</p>

    <h2>Multiseries</h2>

    <p>A multiseries data set has several pieces of dependent information and one piece of independent information. Here’s the data about hypothermia from before, with additional data:</p>

    <figure>[Image goes here]</figure>

    <p>Returning to our tequila example, we might have several series:</p>

    <figure>[Image goes here]</figure>

    <p>With this data set, we know several things about 2001. We know that 16,452 shots were served to men; and that 17,364 of shots served were Blanco (the uncolored, un-aged form of tequila.)</p>

    <p>We don’t, however, know how to combine these in useful ways. They aren’t related. We can’t say what percentage of blanco was sold to men; or how many shots were served to women.</p>

    <p>In other words, multiseries is simply several simple series on one chart. We can show them together—but we can’t stack or combine them.</p>

    <figure>[Image goes here]</figure>

    <h2>Summable Multiseries</h2>

    <p>As the name suggests, a summable multiseries is a particular fact (gender, type of tequila) segmented into subgroups.</p>

    <figure>[Image goes here]</figure>

    <p>Because we know a drinker is either male or female, we can add these together to make broader observations about total consumption. For one thing, we can display percentages.</p>

    <figure>[Image goes here]</figure>

    <p>For another, we can stack segments to reveal a whole:</p>

    <figure>[Image goes here]</figure>

    <p>One challenge with summable multiseries data is knowing which series go together. Consider the following:</p>

    <figure>[Image goes here]</figure>

    <p>There is nothing inherent in this data to tell us how we can combine information. It takes human understanding of data categories to know that “Male+Female=a complete set” and “Blanco+Reposado+Anejo=a complete set”. Without this knowledge, we can’t combine the data, or worse, we might combine it wrongly.</p>

    <h3>It's hard to explore summarized data</h3>

    <p>Even if we know this data’s meaning, and realize it is two separate multiseries tables (one on gender and one on alcohol type) we can’t explore it deeply. For example, we can’t find out how many women drank blanco in 2000.</p>

    <p>This is a common, and important, mistake. Many people are tempted to say:</p>
    <ul>
      <li>36.7% of shots sold in 2000 were sold to women.</li>
      <li>And there were 9,929 shots of Blanco sold in 2000.</li>
      <li>Therefore, 3642.5 shots of Blanco were sold to women.</li>
    </ul>

    <p>This is wrong. It can only be done when you know that one category of information (drink type) is evenly distributed across another (gender.) The fact that the result isn’t even a whole number reminds us not to do this—nobody drank a half shot.</p>

    <p>The only way to truly explore the data and ask new questions of it, such as “how many shots of Blanco were sold to women in 2000?” is to have the raw data. And then it’s a matter of knowing how to aggregate it.</p>

    <h2>Summary records</h2>

    <p>The following table looks like the kind of data a point-of-sale system might generate for bar sales. It includes a column of categorical information (gender, where there are two possible types) and subtotals for each kind of drink. It also includes the totals for those drinks.</p>

    <figure>[Image goes here]</figure>

    <p>This kind of table is familiar to anyone who’s done basic exploration in a tool like Excel. We can do subcalculations:</p>

    <ul>
      <li>There are 5 male drinkers and 3 female drinkers</li>
      <li>There were 16 Blancos, 8 Reposados, and 9 Anejos</li>
      <li>We sold a total of 33 shots</li>
    </ul>

    <p>But more importantly, we can combine categories of data to ask more exploratory questions. For example: <em>Do women prefer a certain kind of Tequila?</em> This is the kind of thing Excel, well, excels at, and it’s often done using a tool called a Pivot Table.</p>

    <p>Here’s a table looking at the average number of Blanco, Reposado, and Anejos consumed by male and female patrons:</p>

    <figure>[Image goes here]</figure>

    <p>Looking at this table, we can see a pretty clear trend: Women like Blanco; men seem evenly split across all three types of tequila<a class="footnote" href="#fn2">2</a>.</p>

    <p>The thing about this data, however, is that it’s still been aggregated somehow. We summarized the data along several dimensions—gender and alcohol type—by aggregating them by the name of the patron. While this isn’t raw data, it’s close.</p>

    <p>One good thing about this summarization is that it keeps the data set fairly small. It also suggests ways in which the data might be explored. It is pretty common to find survey data that looks like this; for example, a Google Form might output this kind of data to a survey that says:</p>

    <figure>[Image goes here]</figure>

    <p>Produces the following data in the Google spreadsheet:</p>

    <figure>[Image goes here]</figure>

    <aside data-type="sidebar">
      <h5>Revealing the underlying variance: scatterplots and histograms</h5>

      <p>When you have summary records or raw data, it’s common to aggregate it in order to display it well. By showing the total tequila consumed (summing up the raw information) or the average number of glasses per patron (the mean of the raw information) we make the data easier to understand.</p>
    </aside>

    <p>Consider the following transactions:</p>

    <figure>[Image goes here]</figure>

    <p>We can show the average number of each drink consumed as a summary.</p>

    <figure>[Image goes here]</figure>

    <p>But averages hide things. Perhaps some people have a single drink, and others have many. There are ways to visualize the spread, or variance, of data that indicate the underlying shape of the information, including heat charts, histograms, and scatterplots. But when keeping the underlying data, you can wind up with more than one <em>dependent</em> variable for each <em>independent</em> variable.</p>

    <p>For example, here’s a scatterplot from <em>Freakonomics<a href="#fn3" class="footnote">3</a></em> that compares unemployment data to investment. There isn’t a one-to-one ratio here—at least not at this level—because a particular level of investment (the independent metric) may produce different levels of unemployment (the presumed dependent metric) in different years.</p>

    <figure>[Image goes here]</figure>

    <p>This is a good example of why scatterplots are good: they show outliers. In our tequila data, a better visualization—such as a histogram, which counts how many people fit into each bucket that made up an average—might reveal that a few people are drinking a lot, and a large number of people are drinking a small amount.</p>

    <p>Consider this histogram of number of drinks per patron. All we did was tally up how many people had one drink, how many had two, how many had three, and so on. Then we plotted how <em>frequently</em> each number occurred, which is why this is called a <em>frequency histogram</em>.</p>

    <figure>[Image goes here]</figure>

    <p>The <em>average</em> number of drinks in this data set is roughly 3. And the <em>mode</em> of the number of drinks—the most common number of drinks—is 2. But as the histogram shows, there are three heavy drinkers, who’ve each consumed 7 shots—pushing up the average.</p>

    <p>In other words, when you have raw data, you can see the exceptions and outliers, and tell a more accurate story.</p>

    <p>Even this data, verbose and informative as it is, isn’t the raw information. It’s still aggregated.</p>

    <p>Aggregation happens in many ways. For example, a restaurant receipt usually aggregates data by table. There’s no way to find out what an individual person at the table had for dinner—just the food that was served and what it cost. To get to really specific exploration, however, we need data at the transaction level.</p>

    <h2>Individual transactions</h2>

    <p>Transactional records capture things about a specific event. There’s no aggregation of the data along a dimension like someone’s name (though their name may be captured.) It’s not rolled up over time. It’s instantaneous.</p>

    <figure>[Image goes here]</figure>

    <p>These transactions can be aggregated by any column. They can be cross-referenced by those columns. The timestamps can also be aggregated into buckets—hourly, daily, annually. Ultimately, the initial data set we saw of tequila consumption per year results from this raw data, summarized significantly.</p>

    <h2>The subjective nature of data storytelling</h2>

    <p>Even when captured and analyzed with great care, data is always subjective. Analysts editorialize, whether they like it or not, because of the practicalities of using data for storytelling. These editorial decisions in data come from three places.</p>

    <h3>First: Deciding what to collect.</h3>

    <p>We have chosen to collect gender, name, and tequila type. We didn’t collect data on glasses of water consumed, or shoe type, or eye color. This is ultimately an editorial decision, and it’s one reason that no data is ever entirely honest.</p>

    <p><strong>Can we fix it?</strong> As technology improves, we may overcome this limitation—for example, a bar camera connected to machine learning that can extract dimensions of data from the raw footage years later—but for the foreseeable future, simply choosing what to record is subjective. It’s a decision that is strongly influenced by our biases, including the stories we hope to tell and the arguments we’re hoping to justify.</p>
    <h3>Second: Deciding how to aggregate</h3>

    <p>When we roll up data into buckets, or transform it somehow, we take away the raw history. For example, when we turned raw transactions into annual totals:</p>

    <ul>
      <li>We anonymized the data by removing the names of patrons when we aggregated it.</li>
      <li>We bucketed timestamps, summarizing by year.</li>
    </ul>

    <p>Either of these pieces of data could have shown us that someone was a heavy, habitual drinker (based on total alcohol consumed by one person, or based on the rate of consumption from timestamps.) Did we have a moral obligation to warn someone? What if the patron had killed someone while drunk? Is the data subject to legal discovery? Are we <em>allowed</em> to aggregate it?</p>

    <p><strong>Can we fix it?</strong> The big data movement is going to address some of this. Once, it was too computationally intensive to store all the raw transactions. We had to decide how to aggregate things at the moment of collection, and throw out the raw information. But advances in storage efficiency, parallel processing, and cloud computing are making on-the-fly aggregation of massive data sets a reality, which should overcome some amount of aggregation bias.</p>

    <h3>Third: Deciding how to communicate</h3>

    <p>Humans can’t consume large amounts of raw data. When we tell stories, we select the narrative, and choose where to shine the spotlight. At the start of this, we said that 36.7% of Tequila shots in 2000 were consumed by women. That’s an editorial decision, which has broad impact.</p>

    <p>It’s easy to communicate a factoid—but does it somehow bias people? What if 2000 were an exception, and in other years women consumed significantly more? Do I have an obligation to present it in context?</p>

    <p><strong>Can we fix it?</strong> This is one of the things that interactive, exploratory infographics fix. Because they partly hand the decision about how to communicate over to the audience, they encourage discovery and transparency. The key is to include the source information in the visualization, and to turn a display into an interactive interface that encourages users to click, segment, drill down, and query in new and unexpected ways—ways that even the author of the source material didn’t anticipate.</p>

  </section>
  <p class="footnote" id="fn2">This is not enough data to make a statistically reliable statement like this. But it’s made up data anyway, so stop thinking so much about tequila consumption.</p>
  <p class="footnote" id="fn3">http://freakonomics.com/2011/04/01/graph-fight-more-on-taylor%E2%80%99s-scatterplot/</p>
</section>
